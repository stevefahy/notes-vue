import{d as h,V as S,m,W as v,U as C,D as F,_ as B,Y as w,N as y,q as a,M as A,a8 as N,Z as b,K as G,X as M,a as n}from"./vue-vendor-DGfeFLTS.js";import{u as q,a as x,A as V,_ as Y}from"./index-Dv-qMdo4.js";import{V as O,a as H,b as W}from"./VCard-DjaoZtbU.js";import"./vuetify-vendor-ZlQH_a5_.js";const K={class:"auth"},X={novalidate:""},Z={key:0},j={class:"control"},z={class:"control"},J={class:"control"},Q={class:"actions"},ee=h({__name:"LoginPage",setup(re){const R=q(),g=F(),I=V,l=n(!0),f=n(!1),L=n(void 0),D=n(void 0),P=n(void 0),p=n(""),c=n(""),_=n(""),s=n({error_state:!1,error_severity:"",message:""});let U,k;(o=>{U=o.onLogin,k=o.onRegister})(R.authContext);const T=()=>{u(),l.value=!l.value,p.value="",c.value="",_.value=""},u=()=>{s.value={error_state:!1,message:""},f.value=!1},E=o=>{if(o.includes("username")){const e=p.value;if(e&&e.length<2)return L.value?.focus(),s.value={error_state:!0,message:I.SIGNUP_INVALID_USERNAME},!1}if(o.includes("email")){const e=c.value;if(!e||!e.includes("@")||!e.includes("."))return D.value?.focus(),s.value={error_state:!0,message:I.SIGNUP_INVALID_EMAIL},!1}if(o.includes("password")){const e=_.value;if(!e||e.trim().length<7)return P.value?.focus(),s.value={error_state:!0,message:I.SIGNUP_INVALID_PASSWORD},!1}return!0},$=async o=>{o.preventDefault(),f.value=!0,s.value={error_state:!1,message:""};const e=c.value,i=_.value;if(l.value){if(!E(["email","password"]))return;try{if(!e||!i)return;const d=await U(e,i);f.value=!1,d?.error?s.value={error_state:!0,message:d.error}:g.push(`${V.DEFAULT_PAGE}`)}catch(d){d.value={error_state:!0,message:d.message}}}else{const r=p.value;if(!E(["username","email","password"]))return;try{if(!r||!e||!i)return;const t=await k(r,e,i,"angular");if(f.value=!1,t==null)return;if(t.error){s.value={error_state:!0,message:t.error};return}t.success&&t.notebookID&&t.noteID?g.push(`/notebook/${t.notebookID}/${t.noteID}`):g.push(`${V.DEFAULT_PAGE}`)}catch(t){t.value={error_state:!0,message:t.message}}}};return(o,e)=>{const i=B("error-alert");return C(),S("section",K,[m(O,null,{default:v(()=>[m(H,{class:"header"},{default:v(()=>[w(y(l.value?"Login":"Sign Up"),1)]),_:1}),m(W,null,{default:v(()=>[a("form",X,[l.value?b("",!0):(C(),S("div",Z,[a("div",j,[e[8]||(e[8]=a("label",{for:"username"},"Your Name",-1)),A(a("input",{type:"text",id:"username",required:"",placeholder:"Username",autoComplete:"username","onUpdate:modelValue":e[0]||(e[0]=r=>p.value=r),onInput:u,ref_key:"usernameInputRef",ref:L},null,544),[[N,p.value]])])])),a("div",z,[e[9]||(e[9]=a("label",{for:"email"},"Your Email",-1)),A(a("input",{type:"email",id:"email",required:"",placeholder:"Email",autoComplete:"email","onUpdate:modelValue":e[1]||(e[1]=r=>c.value=r),onChange:e[2]||(e[2]=r=>u()),onInput:e[3]||(e[3]=r=>u()),ref_key:"emailInputRef",ref:D},null,544),[[N,c.value]])]),a("div",J,[e[10]||(e[10]=a("label",{for:"password"},"Your Password",-1)),A(a("input",{type:"password",id:"password",required:"",placeholder:"Password",autoComplete:"current-password","onUpdate:modelValue":e[4]||(e[4]=r=>_.value=r),onChange:e[5]||(e[5]=r=>u()),onInput:e[6]||(e[6]=r=>u()),ref_key:"passwordInputRef",ref:P},null,544),[[N,_.value]])]),a("div",Q,[m(x,{class:"contained medium",color:"secondary",onClick:$,disabled:f.value},{default:v(()=>[w(y(l.value?"Login":"Create Account"),1)]),_:1},8,["disabled"]),m(x,{variant:"text",density:"default",class:"basic large",onClick:e[7]||(e[7]=r=>T())},{default:v(()=>[w(y(l.value?"Create new account":"Login with existing account"),1)]),_:1})])]),m(G,{name:"error"},{default:v(()=>[s.value.error_state?(C(),M(i,{key:0,error_state:s.value.error_state,message:s.value.message,error_severity:s.value.error_severity},null,8,["error_state","message","error_severity"])):b("",!0)]),_:1})]),_:1})]),_:1})])}}}),le=Y(ee,[["__scopeId","data-v-0446dd1d"]]);export{le as default};
